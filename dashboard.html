<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Dashboard</title><style>body{font-family:system-ui;margin:0;background:#f6f7fb}header{padding:12px;background:#fff;display:flex;gap:8px;align-items:center;border-bottom:1px solid #eee}.logo{font-weight:800;color:red}.wrap{max-width:900px;margin:20px auto;padding:16px}.card{background:#fff;padding:12px;border-radius:8px;border:1px solid #eee;margin-bottom:12px}input,button{padding:8px;border-radius:8px;border:1px solid #ddd}button{background:#111;color:#fff}</style></head><body><header><div class="logo">MBL</div><div style="color:#777">MobileBanking.legit</div></header><div class="wrap"><div class="card"><h3>Login</h3><input id="lemail" placeholder="Email"><input id="lpass" placeholder="Password" type="password"><button onclick="login()">Login</button></div><div class="card"><h3>Register</h3><input id="rname" placeholder="Full name"><input id="remail" placeholder="Email"><input id="rpass" placeholder="Password" type="password"><button onclick="register()">Register</button></div><div id="app" style="display:none"><div class="card"><h3>Welcome, <span id="uname"></span></h3><button onclick="downloadPDF()">Download PDF Statement</button><button onclick="logout()" style="float:right">Logout</button></div><div class="card"><h4>Make Transfer</h4><input id="tamount" placeholder="Amount" type="number" step="0.01"><input id="tcounter" placeholder="To"><button onclick="transfer()">Send</button></div><div class="card"><h4>Loans</h4><input id="lamount" placeholder="Amount" type="number"><button onclick="applyLoan()">Apply</button><div id="loans"></div></div><div class="card"><h4>Crypto</h4><input id="csymbol" placeholder="Symbol"><input id="camount" placeholder="Amount" type="number" step="0.0001"><button onclick="addCrypto()">Add</button><div id="crypto"></div></div><div class="card"><h4>History</h4><div id="history"></div></div></div></div><div id="live-chat-placeholder"></div><script>function qs(id){return document.getElementById(id)}function register(){fetch('/auth/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:qs('rname').value,email:qs('remail').value,password:qs('rpass').value})}).then(r=>r.json()).then(x=>alert(x.success?'Registered!':'Error: '+(x.error||'')))}function login(){fetch('/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:qs('lemail').value,password:qs('lpass').value})}).then(r=>r.json()).then(x=>{ if(x.success){qs('app').style.display='block';qs('uname').innerText=qs('lemail').value; loadAll()} else alert(x.error)});}function logout(){fetch('/auth/logout',{method:'POST'}).then(()=>location.reload())}function transfer(){fetch('/transactions/transfer',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({amount:qs('tamount').value,counterparty:qs('tcounter').value})}).then(r=>r.json()).then(x=>{alert('Submitted');loadHistory()})}function loadHistory(){fetch('/transactions/history').then(r=>r.json()).then(rows=>{qs('history').innerHTML = rows.map(r=>`<div>${r.date} | ${r.type} | $${(r.amount_cents/100).toFixed(2)} | ${r.status}</div>`).join('')})}function applyLoan(){fetch('/loans/apply',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({amount:qs('lamount').value})}).then(()=>loadLoans())}function loadLoans(){fetch('/loans/my').then(r=>r.json()).then(rows=>qs('loans').innerHTML = rows.map(r=>`${r.date}: $${(r.principal_cents/100).toFixed(2)} - ${r.status}`).join('<br>'))}function addCrypto(){fetch('/crypto/add',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({symbol:qs('csymbol').value,amount:qs('camount').value})}).then(()=>loadCrypto())}function loadCrypto(){fetch('/crypto/my').then(r=>r.json()).then(rows=>qs('crypto').innerHTML = rows.map(r=>`${r.date}: ${r.symbol} ${r.amount}`).join('<br>'))}function downloadPDF(){window.location.href='/pdf/download'}fetch('/settings/live-chat').then(r=>r.json()).then(d=>{ if(d.script) document.getElementById('live-chat-placeholder').innerHTML = d.script; });</script></body></html>
